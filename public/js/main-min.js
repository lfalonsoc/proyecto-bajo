import{cargarParrafo,cargarImagenes,guardarComentario,cargarComentarios}from"./api.js";import{renderParrafo,renderGaleria,renderComentarios}from"./ui.js";import{validarFormulario}from"./utils.js";async function iniciarApp(){const e=document.body,t=localStorage.getItem("modo"),o=(document.getElementById("parrafo"),document.getElementById("imagenes"),document.getElementById("btnActualizarGaleria")),r=document.getElementById("formulario"),a=document.getElementById("usuario"),n=document.getElementById("textoComentario"),c=document.getElementById("btnComentario");document.getElementById("listaComentarios");"oscuro"===t&&e.classList.add("oscuro"),document.getElementById("modo").addEventListener("click",(()=>{e.classList.toggle("oscuro");const t=e.classList.contains("oscuro")?"oscuro":"claro";localStorage.setItem("modo",t)})),window.addEventListener("scroll",(function(){const e=document.getElementById("mainNav"),t=document.querySelector(".header-container").offsetHeight;window.scrollY>50?e.classList.remove("transparent"):e.classList.add("transparent"),window.scrollY>t-100&&(e.style.backgroundColor="rgba(0, 0, 0, 0.95)")})),document.querySelectorAll('a[href^="#"]').forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();const t=this.getAttribute("href");if("#"===t)return;const o=document.querySelector(t);if(o){const e=document.getElementById("mainNav").offsetHeight,t=o.offsetTop-e;window.scrollTo({top:t,behavior:"smooth"})}}))})),c.addEventListener("click",(async e=>{e.preventDefault();if(validarFormulario(a,n))try{const e=await guardarComentario(a.value,n.value);r.reset(),renderComentarios(e.comentarios),alert("¡Comentario guardado con éxito!")}catch(e){alert(`No se pudo guardar el comentario. Error: ${e.message}`)}}));const i=await cargarParrafo();renderParrafo(i);const s=await cargarImagenes();renderGaleria(s.imagenes),o.addEventListener("click",(async function(){const e=await cargarImagenes();renderGaleria(e.imagenes)}));const d=await cargarComentarios();renderComentarios(d.comentarios)}iniciarApp();